(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{121:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return p}));var r=a(0),n=a.n(r);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=n.a.createContext({}),u=function(e){var t=n.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},b=function(e){var t=u(e.components);return n.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},m=n.a.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),b=u(a),m=r,p=b["".concat(l,".").concat(m)]||b[m]||d[m]||o;return a?n.a.createElement(p,i(i({ref:t},s),{},{components:a})):n.a.createElement(p,i({ref:t},s))}));function p(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var s=2;s<o;s++)l[s]=a[s];return n.a.createElement.apply(null,l)}return n.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"},92:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return i})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return u}));var r=a(3),n=a(7),o=(a(0),a(121)),l={title:"Calculate Field Values With Formulas",sidebar_label:"Overview"},i={unversionedId:"formula/summary",id:"formula/summary",isDocsHomePage:!1,title:"Calculate Field Values With Formulas",description:"A formula is an algorithm that derives its value from other fields, expressions, or values. Formulas help you automatically calculate the value of a field based on other fields.",source:"@site/docs/formula/summary.md",slug:"/formula/summary",permalink:"/docs/formula/summary",editUrl:"https://github.com/steedos/steedos.org/tree/master/docs/formula/summary.md",version:"current",sidebar_label:"Overview",sidebar:"someSidebar",previous:{title:"Profile",permalink:"/docs/metadata/profile"},next:{title:"Build a Formula Field",permalink:"/docs/formula/create"}},c=[{value:"Where can formulas be used?",id:"where-can-formulas-be-used",children:[]},{value:"Formula data type",id:"formula-data-type",children:[]},{value:"Elements in formulas",id:"elements-in-formulas",children:[{value:"Text representation value",id:"text-representation-value",children:[]},{value:"Function",id:"function",children:[]},{value:"Operator",id:"operator",children:[]},{value:"Field reference",id:"field-reference",children:[]},{value:"Comments (not supported)",id:"comments-not-supported",children:[]},{value:"Operators and functions in formulas",id:"operators-and-functions-in-formulas",children:[]}]}],s={rightToc:c};function u(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"A formula is an algorithm that derives its value from other fields, expressions, or values. Formulas help you automatically calculate the value of a field based on other fields."),Object(o.b)("h2",{id:"where-can-formulas-be-used"},"Where can formulas be used?"),Object(o.b)("p",null,"The formula can be used in many places of Huayan Rubik's cube. Before you start using formulas, understand the differences in their usage."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Approval process:")," The condition for entering the approval process is that the definition record must be met. "),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Approval steps:")," The condition for entering the approval step is that the definition record must be met."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Field default value\uff1a"),"Apply a value to a custom field when the user creates a record. Use formulas to define default values. The user can change the default value. The default value can be determined by a formula that uses the value you specify, the merge field, or the expression."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Formula field\uff1a"),"Automatically calculates the value of a custom field using the value, merge field, or expression you specify. You cannot change the value of a formula field."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Validation rules\uff1a"),"To prevent users from entering invalid values in standard / custom fields, validation rules can be based on formulas and display error messages to users when they enter invalid values."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Field update\uff1a"),"Automatically changes the field value to the value you specify. Formulas can include other values, merged fields, or expressions. Field updates can be set to occur due to workflow rules or approval processes."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Workflow rules\uff1a"),"It is used to define the conditions that must be met when records trigger workflow rules.")),Object(o.b)("p",null,"Common formula process"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:"left"}),"Usage"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:"center"}),"When will it be implemented?"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:"center"}),"Read only?"),Object(o.b)("th",Object(r.a)({parentName:"tr"},{align:"center"}),"Null processing can be specified?"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(o.b)("strong",{parentName:"td"},"Approval Process")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"Record submitted for approval"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"Not applicable"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"No")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(o.b)("strong",{parentName:"td"},"Approval Step")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"Record submitted for approval"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"Not applicable"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"No")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(o.b)("strong",{parentName:"td"},"Field Default Value")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"When creating a record"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"No"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"No")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(o.b)("strong",{parentName:"td"},"Formula Field")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"After the record is saved"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"Yes"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"Yes")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(o.b)("strong",{parentName:"td"},"Validation Rules")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"Before the record is saved"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"Not applicable"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"No")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(o.b)("strong",{parentName:"td"},"Field Update")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"During workflow or approval process"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"Not applicable"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"No")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"left"}),Object(o.b)("strong",{parentName:"td"},"Workflow Rule")),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"When records are kept"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"Not applicable"),Object(o.b)("td",Object(r.a)({parentName:"tr"},{align:"center"}),"No")))),Object(o.b)("h2",{id:"formula-data-type"},"Formula data type"),Object(o.b)("p",null," The data type of the formula determines the type of data expected to be returned from the formula."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Text\uff1a"),"Returns a character string. To display text in addition to formula output, place the text in quotation marks. Use the text data type for fields such as text, multiline text, web address, email address, and AutoNumber."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Boolean\uff1a"),"Returns true or false. This field appears as a check box on the record details page and in reports. Use true as the checked value and false as the unselected value."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Amount of money:")," Only numeric value can be entered. The default number is 2 decimal places. You can also specify the number of decimal places."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Date:"),"Returns the date representing a day in the calendar. The current date can be obtained by calling the internal function TODAY () in the formula."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Time and date\uff1a"),"Returns data representing a time in time. The datetime field includes the date and the time of the day consisting of hours, minutes, and seconds. You can use the NOW() function to insert the current date and time into the formula."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Number\uff1a"),"Returns a positive or negative integer or decimal (up to 18 digits). Huayan Rubik's cube uses the rule of rounding and bisecting formula fields. For example, 12.345 becomes 12.35 and - 12.345 becomes - 12.35."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Percentage\uff1a"),"Returns a number in percent format followed by a percent sign (up to 18 digits). The percentage data is stored as a decimal, and the value is the decimal divided by 100, that is, 90% is equal to 0.90."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Time (temporarily not supported)\uff1a"),"Returns data representing a time in time, no date. The time field contains hours, minutes, seconds, and milliseconds. You can use the TIMENOW() function to insert the current date into the formula.")),Object(o.b)("h2",{id:"elements-in-formulas"},"Elements in formulas"),Object(o.b)("p",null," Formulas can contain references to field values, operators, functions, literal representation values, or other formulas, Use any or all of these elements to build a formula."),Object(o.b)("h3",{id:"text-representation-value"},"Text representation value"),Object(o.b)("p",null," A text string or number that you enter that has not been calculated or changed."),Object(o.b)("p",null," For example, if you have a value that is always multiplied by 2% of the amount, the formula will contain the literal value of 2% of the amount:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"ROUND((amount of money*0.02), 2)\n")),Object(o.b)("p",null," This example contains each possible part of the formula:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"A function called round is a function that returns a numeric value rounded to a specified number of decimal places."),Object(o.b)("li",{parentName:"ul"},"A field reference named amount."),Object(o.b)("li",{parentName:"ul"},"An operator * Tells the formula builder to text the value of the 0.02 times amount field."),Object(o.b)("li",{parentName:"ul"},"A text represents the value of 0.02. Use decimal values for all percentages. To include the actual text in your formula, enclose it in quotation marks."),Object(o.b)("li",{parentName:"ul"},"The last digit in this formula, 2, is the input required by the round function to determine the number of decimal places to return.")),Object(o.b)("h3",{id:"function"},"Function"),Object(o.b)("p",null,"And return a number of system defined values, that is, the value of a function you may need to input. For example, TODAY() does not need to enter a value, but returns the current date. The TEXT (value) function requires you to enter a percentage, number, or currency and return text."),Object(o.b)("h3",{id:"operator"},"Operator"),Object(o.b)("p",null,'A symbol that specifies the type of calculation to perform or the order in which it is performed. For example, the "+" sign specifies that two values should be added. The left and right parentheses specify the expression you want to evaluate first.'),Object(o.b)("h3",{id:"field-reference"},"Field reference"),Object(o.b)("p",null,"Use a merge field to reference the value of another custom or standard field.\nThe syntax of the merge field is ",Object(o.b)("inlineCode",{parentName:"p"},"field_name")," for the standard field,For custom fields, it is ",Object(o.b)("inlineCode",{parentName:"p"},"field_name__c"),". The syntax for merge fields on related objects is ",Object(o.b)("inlineCode",{parentName:"p"},"reference_to_field_name.field_name"),",The syntax of merge fields on related objects is a. if necessary, you can insert merged fields into your formula. In theory, it supports infinite levels of extended references. For example, three-level references are written as follows: ",Object(o.b)("inlineCode",{parentName:"p"},"reference_to1_field_name.reference_to2_field_name.field_name"),"."),Object(o.b)("p",null,"It supports the reference of the current login user. The writing method starts with ",Object(o.b)("inlineCode",{parentName:"p"},"$user")," to indicate the reference of the current login user, and uses the dot symbol to connect the attributes to be extended.For example, ",Object(o.b)("inlineCode",{parentName:"p"},"$user.name")," refers to the name of the current user, and ",Object(o.b)("inlineCode",{parentName:"p"},"$user.organization.name")," refers to the name of the organization to which the current user belongs."),Object(o.b)("p",null,"To refer to the record ID pointed to by the associated field, simply connect ",Object(o.b)("inlineCode",{parentName:"p"},"_id")," with a dot symbol.For example ",Object(o.b)("inlineCode",{parentName:"p"},"reference_to_field_name._id"),"\uff0c",Object(o.b)("inlineCode",{parentName:"p"},"$user._id"),"."),Object(o.b)("h3",{id:"comments-not-supported"},"Comments (not supported)"),Object(o.b)("p",null,"Notes in formulas begin with a backslash plus an asterisk (",Object(o.b)("em",{parentName:"p"},") and end with an asterisk and a backslash (")," /). For example,"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"/*This is a note on the formula*/\n")),Object(o.b)("p",null,"Comments are ignored when processing formulas."),Object(o.b)("p",null,"Comments are used to explain certain parts of a formula to those who view the definition of a formula. For example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"AND(\n/*competitor field is required, please check if it is empty * /\nLEN(Competitor__c) = 0\uff0c\n)\n")),Object(o.b)("p",null,"The comment content supports any character other than '/ *'. When the comment is complicated, you can write multiple lines of text to comment, for example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"AND(\n/*competitor Field is required,\nPlease check that the field is empty.\nMore notes\nLEN(Competitor__c) = 0\uff0c\n)\n")),Object(o.b)("p",null,"Nested comments can cause syntax errors. For example, you cannot save a formula with the following statements:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"/* /* comment */ */\n")),Object(o.b)("h3",{id:"operators-and-functions-in-formulas"},"Operators and functions in formulas"),Object(o.b)("p",null,"Many operators and functions can be used when building formulas. Please refer to: ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/formula/functions"}),"Operators and Functions in Formulas"),"."))}u.isMDXComponent=!0}}]);